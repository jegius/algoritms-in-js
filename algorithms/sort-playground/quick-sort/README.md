# Быстрая сортировка

Быстрая сортировка - это эффективный алгоритм сортировки, изобретенный английским информатиком Чарльзом Хоаром, с основной идеей "разделяй и властвуй". Быстрая сортировка работает, разбивая массив на две части, вокруг "опорного" элемента.

## Плюсы и минусы
Плюсы:
1. Это одна из самых быстрых известных универсальных сортировок. В среднем она работает в _O(n log n)_ раз.
2. Быстрая сортировка работает "на месте", что означает, что ей никогда не требуется больше _O(log n)_ оперативной памяти.

Минусы:
1. В худшем случае быстрая сортировка занимает _O(n^2)_ раз, хотя это крайне редкое явление для случайно отсортированных массивов. Типичное число сравнений - это 39% больше _n log n_.
2. Быстрая сортировка не является стабильной сортировкой, что означает, что сортировка двух объектов с равными ключами может изменить их относительный порядок в разных отсортированных массивах.

## Имплементация с использованием JavaScript

```javascript
import {less, swap} from '../utils.mjs';

/**
 * Экспортируемая функция `quickSort` принимает массив `data` 
 * как аргумент, она вызывает вспомогательную функцию `sort`, 
 * чтобы отсортировать весь массив, и возвращает отсортированный массив.
 * 
 * @param {Array} data - Массив данных для сортировки.
 * @return {Array} - Отсортированный массив.
 */
export function quickSort(data) {
    sort(data, 0, data.length - 1);
    return data;
}

/**
 * `Sort` - это вспомогательная функция, которая вызывается рекурсивно.
 * Она принимает массив данных и два индекса как ввод, и сортирует 
 * подмассив между этими двумя индексами.
 * 
 * @param {Array} data - Массив данных для сортировки.
 * @param {Number} lowIndex - Нижний индекс для сортировки.
 * @param {Number} heightIndex - Верхний индекс для сортировки.
 */
function sort(data, lowIndex, heightIndex) {
    if (heightIndex <= lowIndex) {
        return;
    }
    
    const pivot = partition(data, lowIndex, heightIndex);
    sort(data, lowIndex, pivot - 1);
    sort(data, pivot + 1, heightIndex);
}

/**
 * `Partition` - это вспомогательная функция, которая взаимодействует 
 * с подмассивом между двумя указанными индексами. Она выбирает опорный 
 * элемент и переупорядочивает подмассив так, что элементы меньше опорного 
 * элемента находятся слева от него, а большие - справа. Затем возвращает 
 * индекс опорного элемента.
 * 
 * @param {Array} data - Массив данных для сортировки.
 * @param {Number} lowIndex - Нижний индекс для сортировки.
 * @param {Number} heightIndex - Верхний индекс для сортировки.
 * @return {Number} - Индекс опорного элемента.
 */
function partition(data, lowIndex, heightIndex) {
    let leftPoint = lowIndex;
    let rightPoint = heightIndex + 1;
    const mid = data[lowIndex];

    while (true) {
        while (less(data[++leftPoint], mid)) {
            if (leftPoint === heightIndex) {
                break;
            }
        }
        while (less(mid, data[--rightPoint])) {
            if (rightPoint === lowIndex) {
                break;
            }
        }

        if (leftPoint >= rightPoint) {
            break;
        }

        swap(data, leftPoint, rightPoint);
    }
    swap(data, lowIndex, rightPoint);
    return rightPoint;
}
```